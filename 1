import streamlit as st
import requests
import pandas as pd

st.title("‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô üí±")

API_KEY = "5189948707252e7861f96c8f"
BASE_CURRENCY = st.selectbox("‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô", ["USD", "EUR", "THB", "JPY", "GBP"])

url = f"https://v6.exchangerate-api.com/v6/{API_KEY}/latest/{BASE_CURRENCY}"
response = requests.get(url)
data = response.json()

if "conversion_rates" in data:
    rates = data['conversion_rates']
    df = pd.DataFrame(list(rates.items()), columns=["Currency", "Rate"])
    
    selected_currencies = st.multiselect(
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö", df["Currency"].tolist(), 
        default=["THB", "EUR", "JPY", "GBP"]
    )
    
    if selected_currencies:
        filtered_df = df[df["Currency"].isin(selected_currencies)]
        st.table(filtered_df)
    else:
        st.info("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á")
else:
    st.error(f"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Å‡∏±‡∏ö API: {data.get('error-type', 'Unknown Error')}")
